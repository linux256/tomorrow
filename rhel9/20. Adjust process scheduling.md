\newpage

## OPERATE RUNNING SYSTEMS
# 20. Adjust process scheduling

---

### I. EJECUCIÓN EN SEGUNDO PLANO

`comando &`

> Ejecuta comando en *background*. Un proceso corriendo en background no muere
> junto a su padre. Su nuevo padre pasa a ser `systemd`

 `jobs`

> Muestra los trabajos activos, que incluye trabajos corriendo en *background* y
> trabajos suspendidos

`fg ID`

> Retoma el trabajo ID llevándolo a primer plano *foreground*. Si no se indica
> un ID, se emplea el job que el shell considera actual (el más reciente)

### II. SUSPENSIÓN

`CTRL-z`

> Detiene una tarea y la manda a *background*. Muy útil, por ejemplo, para salir
> de `vim` probar un script que se está codificando y regresar a vim con `fg`

`kill -SIGSTOP 345`

> Detiene el proceso 345 enviándole la señal `SIGSTOP`

`bg ID`

> Retoma el trabajo suspendido ID para continuar su ejecución en *background* 


### III. PROCESOS. PS

*El comando `ps` admite opciones sin guiones, con guiones y opciones largas. Hay
tres sintáxis que se emplean para las opciones en comandos Linux,*

* `u a x` Sintáxis BSD, se suele agrupar como `aux`
* `-u -a -x` Sintáxis UNIX, se puede agrupar `-aux`
* `--user` Sintáxis GNU o sintáxis *long options*

*El comando `ps` admite muchas combinaciones de opciones, algunas usuales son,*

* `ps f ax` muestra con jerarquia en arbol ascii (`f`) todos los procesos (`ax`)
* **`ps u ax`** enumera en formato humano (`u`) todos los procesos (`ax`)
* **`ps u ax --lines=10 --headers`** idem, mostrando cabecera cada 10 líneas
* **`ps u ax --lines=10 --headers --sort=-times,-pmem`** ordena primero de mayor
a menor consumo acumulado de CPU (en segundos) y en caso de igualdad ordena de
mayor a menor % de memoria usada

>

* **`ps u -C httpd, sshd`** muestra todos los procesos `httpd` y `sshd`
* **`ps u -u student`** muestra los procesos con usuario efectivo `student`
* **`ps u -U john -u root`** procesos con (`-U`) usuario real `RUID=john` y
con usuario (`-u`) `EUID=root`.  
***RUID*** *es el usuario que creó el proceso y* ***EUID*** *es el usuario cuyos
permisos de acceso usa el proceso*
* `ps u -t tty1` muestra procesos en terminal `tty1`
* `ps u 834` muestra el proceso 834 (como `ps u -p 834` o `ps up 834`)

>

* `ps -ef` muestra todos los procesos en el sistema incluido PPID 
* `ps -f --ppid 128` muestra todos los procesos cuyo PPID es 128

`pgrep -a ".*ssh"`

> Muestra comando de todos los procesos cuyo nombre se ajusta a la BRE indicada


