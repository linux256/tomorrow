\newpage

## MANAGE CONTAINERS
# 61. Find and retrieve container images from a remote registry

---

### I. CONTENEDORES, IMAGENES Y REGISTROS

Un **container** es una forma de ejecutar una aplicación basada en un
**container image** que incluye todas las dependencias requeridas para correr
la aplicación. Es un paquete completo que se ejecuta sobre un *container engine*
o *container runtime* que forma parte del sistema operativo del host anfitrión.
Se apoyan en 3 tecnologías,

* NAMESPACES, que proporcionan aislamiento a los recursos del sistema *mount,
process, network, users, ipc (interprocess communication)*
* CONTROL GROUPS o C-GROUPS, que es una característica del kernel que habilita
establecer limitaciones en el acceso a los recursos (CPU,RAM) del sistema
* SELINUX, que proporciona un acceso seguro usando etiquetas para los recursos

Un **contenedor** es una instancia ejecutable de una **imagen**, que consta de
dos partes: una *container image*, o imagen base del contenedor y una *writable
layer*, o capa escribible en la que almacenar los cambios. Los *container image*
se almacenan en **registros** y siguen el formato *docker*.

En RedHat, el *container engine* empleado es **CRI-o** que es OCI compliant. 
Con **CRI-o** y `podman` se dispone de tres capacidades importantes (frente a
*docker*): (1) se pueden ejecutar contenedores *rootless*  (2) los contenedores
se ejecutan en *user namespace* y (3) los contenedores corren sobre **CRI-o**
sin necesidad de ningún daemon. Para entregar servicios de misión crítica, es
necesario usar herramientas de *orquestación*, como *Kubernetes* u *Openshift*
(distribución de kubernetes de RedHat). Las herramientas para gestionar
contenedores son,

* `podman` , que gestiona contenedores
* `skopeo` , que permite gestionar imágenes
* `buildah` , que permite crear imágenes personalizadas

>

`dnf install container-tools`

> Herramientas para gestionar *pods* (grupo de contenedores que comparten
recursos de almacenamiento y de red, junto a una especificación de como 
ejecutarlos), *container images* y *containers*

>

### II. BUSQUEDA EN REGISTROS: PODMAN

`/etc/containers/registries.conf`

> Fichero de especificación general de los *container registries*

`~/.config/containers/registries.conf`

> Fichero personalizado de definicion de *container registries*

**`podman info`**

> Muestra información del sistem de contenedores, incluidos los registros donde
se buscarán las imágenes

**`podman login registry.access.redhat.com`**

> Inicia sesión en *container registry* de RedHat

**`podman search mariadb`**

> Busca la imagen del contenedor `mariadb`

`podman search  --filter stars=5  --filter is-official=true  alpine`

> Busca imangen de alpine, que tenga al menos 5 estrellas de valoración y que
sea oficial. `alpine` es un contenedor base muy pequeño empleado habitualmente
como punto de partida para otras imágenes

`podman search  --filter is-official=true  UBI`

> Busca la imagen oficial de Universal Base Image, suministrada por RedHat


