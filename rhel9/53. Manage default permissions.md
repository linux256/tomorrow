\newpage

## MANAGE SECURITY
# 53. Manage  default permissions

---

### I. UMASK: 666 AND NOT UMASK -- 777 AND NOT UMASK

`666`

> Máximo permiso por defecto para ficheros. **En Linux no se puede asignar por
defecto permiso de ejecución a los ficheros**

`777`

> Máximo permiso por defecto de los directorios

`umask nnn`

> Establece la máscara de creación de ficheros para el usuario. La máscara de
creación de ficheros se emplea para determinar los permisos por defecto que
tendrán los ficheros generados. Esto se determina calculando la operación en
binario (*no se substrae exactamente*):

> `valor_defecto_fichero = 666 AND (NOT umask) = 110 110 110 AND (NOT umask)`

> `valor_defecto_directo = 777 AND (NOT umask) = 111 111 111 AND (NOT umask)`

> En ficheros no se puede establecer un permiso de ejecución por defecto,
`umask` solo *quita permisos existentes*, no permite añadirlos por substracción
porque no es un comando prescriptivo.

`022`

> Valor por defecto de la máscar de creación de ficheros de usuario. `umask`
produce los siguientes permisos por defecto:

> `valor_defecto_fichero = 110 110 110 AND (NOT 000 010 010)=`  
> `.                     = 110 110 110 AND 111 101 101      = 110 100 100 = 644`

> `valor_defecto_directo = 111 111 111 AND (NOT 000 010 010)=`  
> `.                     = 111 111 111 AND 111 101 101      = 111 101 101 = 755`

>

### II. CALCULAR PERMISOS RESULTANTES DE APLICAR MASCARA

`printf %o $((  0666 & ~0022  ))`  
`644`

> Muestra en octal (`%o`) el resultado --`$(( ... ))`-- del AND lógico
(`&`) entre 666 y NOT (`~`) 022

>

`printf %o $((  0666 & ~0011  ))`  
`666`

`printf %o $((  0666 & ~0031  ))`  
`646`

`printf %o %((  0777 & ~0011  ))`  
`766`

`printf %o $((  0777 & ~0031  ))`  
`746`


