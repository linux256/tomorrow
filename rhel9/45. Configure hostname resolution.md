\newpage

## MANAGE BASIC NETWORKING
# 45. Configure hostname resolution

---

### I. NOMBRE DEL HOST

*Hostname= nombre del host + nombre del dominio DNS donde reside el host = FQDN*

`hostnamectl`

> Muestra información sobre el Hostname completo, así como s.o. y kernel

**`hostnamectl set-hostname  nombrehost.dominio.net`**

> Establece el FQDN del host. Por defecto se establece el hostname estático pero
con el argumento `--transient` se puede establecer un hostname transitorio. No
se puede establecer un hostname transitorio si existe definido un hostname
estatico. Si se define un hostname transitorio, y posteriormente se define un
hostname estático, el hostname transitorio desaparece.  
Un hostname (estático o transitorio, o el tercer tipo existente `--pretty`)  se
puede borrar asignándole el valor `""`.

**`/etc/hostname`**

> Fichero donde se almacena el hostname persistente o estático. Borrándo este
fichero se elimina el hostname estático.

**`nmcli general hostname  nombrehost.nombredominio.net`**

> Establece el FQDN del host

### II. SERVIDORES DNS

`/etc/hosts`

> Fichero de resolución local de nombres, y por tanto más prioritaria que la
consulta a servidores DNS. El contenido tiene tres columnas: dirección IP,
nombre FQDN y nombre sin dominio del host:

`     192.168.0.20    server00.example.com    server00`

`     192.168.0.22    server02.example.com    server02`

`/etc/nsswitch.conf`

> Base de datos empleada para resolver los nombres, que incluye la entrada (la
fuente `files` hace referencia a `/etc/hosts`):

`     hosts:    files  dns  myhostname`

`getent hosts  google.com`

> Consulta a la base de datos `hosts` por una entrada

`/etc/resolv.conf`

> Fichero generado automáticamente por NetworkManager con nombres de servidores
DNS (`nameserver`). Los cambios manuales a este fichero no se conservan entre reinicios.

`nmcli con mod  miconexion  +ipv4.dns 8.8.8.8`  
`nmcli con mod  miconexion  -ipv4.dns 8.8.8.8`

> Añade (`+`) o quita (`-`) un servidor DNS a la conexión miconexion. No cobra
efecto en la configuración "live" (ni aparecerá reflejado en `/etc/resolv.conf`)
hasta desactivar/activar (`nmcli con down micon && nmcli con up micon`).  
*Los valores "live" de una conexión se pueden modificar con el comando `ip` o
en el caso de la configuración DNS editando manualmente /etc/resolv.conf*

`nmcli con mod midin ipv4.ignore-auto-dns yes`

> Descarta emplear la configuración DNS automática recibida por DHCP


