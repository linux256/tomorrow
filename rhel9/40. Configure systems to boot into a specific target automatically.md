\newpage

## DEPLOY CONFIGURE AND MAINTAIN SYSTEMS
# 40. Configure systems to boot into a specific target automatically

---

### I. TARGETS

Un "target" es un conjunto de servicios que representan un estado final o una
determinada funcionalidad, que viene configurado por dos partes fundamentales:

* `/usr/lib/systemd/system/*.target`  Target Unit File
* `/etc/systemd/system/nombre.target.wants/` Wants directory

`systemctl enable servicio`

> Crea *wants* o enlace simbólico al servicio en `/etc/systemd/system/
multi-user.target.wants/`

`systemctl cat multi-user.target`

> Lista el contenido del unit file del target especificado

`systemctl -t target`

> Lista todos los targets activos

`systemctl --all -t target`

> Lista todos los target

### II. ISOLATE TARGETS

Contienen todo lo que un sistema necesita para arrancar, existen 4 principales,

* `emergency.target`  *minimal number of services to fix the system if something
is seriuously wrong*
* `rescue.target` *fully operational Linux system without no-essential services*
* `multi-user.target` *fully operational Linux system. Default target*
* `graphical.target` Añade interface gráfico

Deben incluir el parámetro `AllowIsolate=yes` en su unit file. Se pueden
alcanzar con el comando,

`systemctl isolate nombre.target`

> Cambia al target especificado, destacando por su analogía con los `runlevel`,

> * `poweroff.target     ...  runlevel 0`
> * `rescue.target       ...  runlevel 1` se necesita contraseña de root para
iniciar sesión
> * **`multi-user.target   ...  runlevel 3`** target por defecto
> * `graphical.target    ...  runlevel 5`
> * `reboot.target       ...  runlevel 6`

### III. TARGET POR DEFECTO Y DEPENDENCIAS DE SERVICIOS

`systemctl get-default`

> Consulta target por defecto

`systemctl set-default  nombre.target`

> Establece target por defecto

`systemctl mask graphical.target`

> Enmascara la unit `graphical.target` imposibilitando iniciarla de ningun modo

`systemctl list-dependencies nombre.service`

> de que servicios depende "nombre", es decir los servicios `Requires` o los
`Want` del servicio "nombre"

`systemctl list-dependencies --reverse  nombre.service`

> que servicios dependen de "nombre", es decir para que servicios "nombre" es
un `Requires` o un `Want` 


