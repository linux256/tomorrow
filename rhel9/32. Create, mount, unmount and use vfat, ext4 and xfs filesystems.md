\newpage

## CREATE AND CONFIGURE FILESYSTEMS
# 32. Create, mount, unmount and use vfat, ext4 and xfs filesystems

---

### I. MAKE FILESYSTEMS

`mkfs`

> Comando para crear sistemas de ficheros, por defecto EXT2, noo está soportado
> el sistema NTFS o BTRFS. Puede crear estos tipos,

> * `mkfs -t ext3` ó `mkfs.ext3` Crea fs de tipo EXT3
> * `mkfs -t ext4` ó `mkfs.ext4` Crea fs de tipo EXT4
> * `mkfs -t xfs ` ó `mkfs.xfs ` Crea fs de tipo XFS, usado por defecto desde RH7
> * `mkfs -t vfat` ó `mkfs.vfat` Crea fs de tipo VFAT

`dnf install dosfstools`

> Requerido para dar formato VFAT

### II. AJUSTAR PROPIEDADES Y FEATURES EN SISTEMAS DE FICHEROS EXT2/3/4

`tune2fs -l /dev/sda1`

> Lista las propiedades del sistema de ficheros en `/dev/sda1`. Las propiedades
> se establecen **en el propio fs** por lo que *viajan* con el contenido

`tune2fs -L label /dev/sda1`

> Asigna la etiqueta `label` al sistema de ficheros en /dev/sda1

`tune2fs -o ^acl,user_xattr /dev/sda1`

> Configura que al montar se active por defecto la propiedad `user_xattr` y que
> se desactive (`^`) por defecto la propiedad `acl`

`tune2fs -O feature`

> Activa o desactiva una determinada *feature* en el fs. Algunas *features* son
> `has_journal` para asegurar consistencia de datos entre apagados no limpios o
> `fast_commit` para asegurar que el *journaling* sea rápido, o `quota` para
> habilitar el sistema de cuotas de inodes.

### III. AJUSTAR PROPIEDADES XFS

`xfs_info  /dev/vg01/lv01`

> Muestra información del sistema de ficheros XFS montado en `/dev/vg01/lv01`

`xfs_admin`

> Herramienta de adminitración del fs XFS con opciones,

> * `-l`  muestra el LABEL del sistema de ficheros
> * `-L`  establece el LABEL del sistema de ficheros
> * `-u`  muestra el UUID del sistema de ficheros
> * `-U`  establece el UUID del sistema de ficheros

`xfs_repair -n -v`

> Repara sistema de ficheros, simulando lo que haría (`-n`), mostrando *verbose*
> (`-v`)

### IV. REVISION MONTAJE DE FILESYSTEMS

```
mkfs.ext4 -L datos       /dev/sdb1     # crea sistema EXT4 con label 'datos'
mount     /dev/sdb1      /mnt/datos
mount     LABEL=datos    /mnt/datos
mount     UUID="5a0..."  /mnt/datos
umount    /mnt/datos                   # desmonta el directorio /mnt/datos
umount    /dev/sdb1      # OJO! fs podría estar montado en varios directorios
```


